---
title: 浏览器解析域名
date: 2020-03-21 21:33:10
categories: "前端"
---

## 准备动作
预先智能匹配URL，从浏览器历史记录、书签等地方找到已经输入过得URl去匹配，如果匹配到了，就会智能显示出来让你去补全，对于google浏览器，他会从缓存中把页面展示出来，也就是说，你还没有按下ENTER键搜索，页面就显示出来了
## 构建动作
浏览器会构建请求行
get / http/1.1
请求方法比如get, 请求路径为根路径、HTTP协议版本是1.1
## 使用缓存
在发送请求之前，浏览器会检查请求头设置的强缓存失效时间，如果命中则直接使用，否则进入下一步。
<!-- more -->
## DNS解析
互联网每台机器的唯一ID是IP地址，但是IP地址不方便记忆，所以开发者发明了域名系统，将IP地址和域名进行一一对应。
得到具体IP地址的过程就叫做DNS解析
具体的DNS解析流程包括：
## 查找浏览器缓存
浏览器提供了DNS数据缓存功能，如果一个域名被解析过，浏览器会把结果缓存下来，在缓存失效之前，下次处理直接走缓存，不需要再经过DNS解析以提高加载速度。

## 查找系统Host文件配置
浏览器在查找不到缓存后，会去本地硬盘host文件中进行查找，去看看里面有没有对应域名和IP地址的规则，如果有则使用，否则进入下一步

## 浏览器发送DNS请求到本地DNS服务器
如果本地没有查找到相应的配置之后，浏览器会发送DNS请求到本地DNS服务器
本地DNS服务器在接受到请求后，会递归查找自己的缓存记录，有缓存则直接返回，否则向根DNS服务器发送请求

## 根DNS服务器
根DNS服务器在接受到本地DNS服务器之后，并不会直接返回域名和IP地址的对应信息，而是高速本地DNS服务器可以向域名服务器上面去查找，并给出域名的地址，这个过程是迭代的。

本地DNS服务器在接受到根DNS服务器的响应之后，会向对应的域服务器发送请求，域服务器接收到请求后，也不会直接返回域名和IP地址之间的对应关心，而是高速DNS服务器，你请求的域名的解析服务器地址。   
## 本地DNs服务器向解析服务器发送请求，
本地DNS服务器向解析服务器发送请求，会获取一个域名和IP地址的对应关系，然后将对应关系返回给浏览器，并缓存在本地

总的来说，就是解析域名，拿到对应的IP地址，中间过程会从历史记录、书签等地方智能匹配过去输入的URL，然后会使用缓存，检查请求头设置的强缓存时间，
还会去查找浏览器DNS数据缓存功能，如果一个域名被解析过，浏览器会把结果缓存下来，在缓存失效之前，下次处理直接走缓存。
会去系统host文件中查找域名和IP地址的对应规则，如果有则使用，否则进入下一步。最后浏览器会从本地DNS服务器、根服务器、域服务器、解析服务器中获取到一个域名和IP地址的对应关系，并缓存在本地